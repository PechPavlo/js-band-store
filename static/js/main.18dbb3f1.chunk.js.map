{"version":3,"sources":["redux/reducers.js","redux/store.js","redux/actions.js","assets/image/icon/shopping-cart.svg","components/Header/Header.jsx","components/LoginPage/LoginPage.jsx","components/BookCard/BookCard.jsx","components/Main/Main.jsx","App.jsx","index.jsx"],"names":["reducer","state","action","type","user","isAuthorized","error","userName","payload","username","avatar","token","booksCatalog","isLoading","books","initUser","localStorage","pechPavloBookStore","JSON","parse","defaultState","book","isActive","cart","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","axios","defaults","baseURL","getBooksCatalog","dispatch","get","headers","Authorization","then","res","data","catch","getBooksCatalogFailure","message","Header","useDispatch","useSelector","className","onClick","removeItem","src","cartIcon","alt","length","LoginPage","useState","inputValue","setInputValue","isNameValid","setIsNameValid","id","onSubmit","event","preventDefault","post","stringify","authorizeUserFailure","htmlFor","placeholder","required","value","onChange","target","BookCard","props","cover","title","author","price","console","log","Main","map","cardBook","App","useEffect","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.18dbb3f1.chunk.js","sourcesContent":["const reducer = (state, action) => {\n  switch (action.type) {\n    case 'AUTHORIZE_USER_STARTED':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          isAuthorized: false,\n          error: null,\n        },\n      };\n\n    case 'AUTHORIZE_USER_SUCCESS':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          isAuthorized: true,\n          userName: action.payload.username,\n          avatar: action.payload.avatar,\n          token: action.payload.token,\n        },\n      };\n\n    case 'AUTHORIZE_USER_FAILURE':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          isAuthorized: true,\n          error: action.payload.error,\n        },\n      };\n    case 'GET_BOOK_CATALOG_STARTED':\n      return {\n        ...state,\n        booksCatalog: {\n          ...state.booksCatalog,\n          isLoading: true,\n          error: null,\n        },\n      };\n\n    case 'GET_BOOK_CATALOG_SUCCESS':\n      return {\n        ...state,\n        booksCatalog: {\n          ...state.booksCatalog,\n          isLoading: false,\n          books: action.payload,\n        },\n      };\n\n    case 'GET_BOOK_CATALOG_FAILURE':\n      return {\n        ...state,\n        booksCatalog: {\n          ...state.booksCatalog,\n          isLoading: false,\n          error: action.payload.error,\n        },\n      };\n\n    case 'SIGN_OUT':\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          isAuthorized: false,\n          userName: '',\n          avatar: '',\n          token: '',\n        },\n      };\n\n    default:\n      return { ...state };\n  }\n};\n\nexport default reducer;\n","/* eslint-disable no-underscore-dangle */\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducer from './reducers';\n\nconst initUser = localStorage.pechPavloBookStore && JSON.parse(localStorage.pechPavloBookStore);\n\nconst defaultState = {\n  isLoading: false,\n  user: {\n    isAuthorized: !!initUser,\n    isLoading: false,\n    userName: initUser?.username || '',\n    token: initUser?.token || '',\n    avatar: initUser?.avatar || '',\n    error: null,\n  },\n  booksCatalog: {\n    books: [],\n    isLoading: false,\n    error: null,\n  },\n  book: {\n    isActive: false,\n    isLoading: false,\n    error: null,\n  },\n  cart: [],\n  error: null,\n};\n\nconst composeEnhancers = typeof window === 'object'\n  && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n  ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n    // Specify extensionâ€™s options like name, actionsBlacklist, actionsCreators, serialize...\n  }) : compose;\n\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\n\nconst store = createStore(\n  reducer,\n  defaultState,\n  enhancer,\n);\n\nexport default store;\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://js-band-store-api.glitch.me/';\n\nexport const authorizeUserStarted = () => ({\n  type: 'AUTHORIZE_USER_STARTED',\n});\n\nexport const authorizeUserSuccess = (users) => ({\n  type: 'AUTHORIZE_USER_SUCCESS',\n  payload: users,\n});\n\nexport const authorizeUserFailure = (error) => ({\n  type: 'AUTHORIZE_USER_FAILURE',\n  payload: {\n    error,\n  },\n});\n\nexport const getBooksCatalogStarted = () => ({\n  type: 'GET_BOOK_CATALOG_STARTED',\n});\n\nexport const getBooksCatalogSuccess = (books) => ({\n  type: 'GET_BOOK_CATALOG_SUCCESS',\n  payload: books,\n});\n\nexport const getBooksCatalogFailure = (error) => ({\n  type: 'GET_BOOK_CATALOG_FAILURE',\n  payload: {\n    error,\n  },\n});\n\nexport const getBooksCatalog = (token) => (dispatch) => {\n  dispatch(getBooksCatalogStarted());\n  axios\n    .get('books', {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n    .then((res) => {\n      dispatch(getBooksCatalogSuccess(res.data));\n    })\n    .catch((error) => dispatch(getBooksCatalogFailure(error.message)));\n};\n\nexport const authorizeUser = (userName) => (dispatch) => {\n  dispatch(authorizeUserStarted());\n  axios\n    .post('signin', { username: userName })\n    .then((res) => {\n      localStorage.pechPavloBookStore = JSON.stringify(res.data);\n      dispatch(authorizeUserSuccess(res.data));\n      dispatch(getBooksCatalog(res.data.token));\n    })\n    .catch((error) => dispatch(authorizeUserFailure(error.message)));\n};\n\nexport const signOut = () => ({\n  type: 'SIGN_OUT',\n});\n","export default __webpack_public_path__ + \"static/media/shopping-cart.a96af164.svg\";","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { signOut } from '../../redux/actions';\nimport './Header.scss';\nimport cartIcon from '../../assets/image/icon/shopping-cart.svg';\n\nconst Header = () => {\n  const dispatch = useDispatch();\n  const { user, cart } = useSelector((state) => state);\n  const handleSignOut = () => {\n    dispatch(signOut());\n    localStorage.removeItem('pechPavloBookStore');\n  };\n\n  return (\n    <div className=\"header\">\n      <div className=\"header-authorization\">\n        <h4 className=\"user-name\">{user.userName}</h4>\n        <button type=\"button\" onClick={handleSignOut}>\n          Sign Out\n        </button>\n      </div>\n      <hr />\n      <div className=\"header-cart\">\n        <h1>JS Band Store</h1>\n        <button type=\"button\" className=\"cart-button\">\n          <img src={cartIcon} className=\"shopping-cart\" alt=\"shopping-cart\" />\n          Cart(\n          {cart.length}\n          )\n        </button>\n      </div>\n      <hr />\n    </div>\n  );\n};\n\nexport default Header;\n","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { authorizeUser } from '../../redux/actions';\nimport './LoginPage.scss';\n\nconst LoginPage = () => {\n  const dispatch = useDispatch();\n  //   const { user } = useSelector((state) => state);\n  const [inputValue, setInputValue] = useState('');\n  const [isNameValid, setIsNameValid] = useState(true);\n\n  const haldleFormSubmit = (event) => {\n    event.preventDefault();\n    if (inputValue.length > 3 && inputValue.length < 17) {\n      dispatch(authorizeUser(inputValue));\n      setInputValue('');\n      setIsNameValid(true);\n    } else {\n      setIsNameValid(false);\n    }\n  };\n  return (\n    <div className=\"login-page\">\n      <h2>JS Band Store</h2>\n      <form id=\"authorization\" onSubmit={haldleFormSubmit}>\n        {!isNameValid && (\n          <span className=\"name-error\">Username is not valid</span>\n        )}\n        <label htmlFor=\"name-input\">\n          Name\n          <input\n            id=\"name-input\"\n            placeholder=\"Event name\"\n            type=\"text\"\n            required\n            value={inputValue}\n            onChange={(event) => {\n              setIsNameValid(true);\n              setInputValue(event.target.value);\n            }}\n          />\n        </label>\n        <button type=\"submit\">Log In</button>\n      </form>\n    </div>\n  );\n};\n\nexport default LoginPage;\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport './BookCard.scss';\n\nconst BookCard = (props) => {\n  const { book } = props;\n  const dispatch = useDispatch();\n  return (\n    <article className=\"book-card\">\n      <div className=\"book-card_image-container\">\n        <img src={book.cover} alt={`cover of ${book.title}`} />\n      </div>\n      <div className=\"book-card-content\">\n        <h3 className=\"book-card_title\">{`${book.title}`}</h3>\n        <p className=\"book-card_subtitle\">{`${book.author}`}</p>\n      </div>\n      <div className=\"book-card-footer\">\n        <span className=\"book-card_price\">{`${book.price}$`}</span>\n        <button\n          className=\"book-card_button\"\n          type=\"button\"\n          onClick={() => {\n            console.log('book view');\n          }}\n        >\n          View\n        </button>\n      </div>\n    </article>\n  );\n};\n\nexport default BookCard;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport BookCard from '../BookCard/BookCard';\nimport './Main.scss';\n\nconst Main = () => {\n  const { booksCatalog, book } = useSelector((state) => state);\n  return (\n    <div className=\"main\">\n      <div className=\"main-controls\">\n        <h4>search</h4>\n        <h4>price</h4>\n      </div>\n      <div className=\"main-content\">\n        {!book.isActive && (\n          <ul className=\"book-list\">\n            {booksCatalog.books.map((cardBook) => (\n              <li key={cardBook.id}>\n                <BookCard book={cardBook} />\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n      <hr />\n    </div>\n  );\n};\n\nexport default Main;\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getBooksCatalog } from './redux/actions';\nimport Header from './components/Header/Header';\nimport LoginPage from './components/LoginPage/LoginPage';\nimport Main from './components/Main/Main';\n\nfunction App() {\n  const dispatch = useDispatch();\n  const { isLoading, user, booksCatalog } = useSelector((state) => state);\n\n  useEffect(() => {\n    if (user.isAuthorized) dispatch(getBooksCatalog(user.token));\n    console.log('app user', user);\n  }, []);\n\n  console.log('app', booksCatalog);\n\n  if (isLoading) {\n    return (\n      <div>\n        <p>Loading ...</p>\n        <span className=\"loading-ring\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      {/* <h1>JS Band Store</h1> */}\n      {!user.isAuthorized && <LoginPage />}\n      {user.isAuthorized && <Header />}\n      {user.isAuthorized && <Main />}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\nimport './assets/style/index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}